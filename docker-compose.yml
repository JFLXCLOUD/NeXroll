version: '3.8'

services:
  nexroll:
    image: jbrns/nexroll:latest
    container_name: nexroll
    restart: unless-stopped
    
    ports:
      - "9393:9393"
    
    volumes:
      # Prerolls directory - mount your NAS or local prerolls folder here
      - /path/to/your/prerolls:/app/data/prerolls
      
      # Persistent data (database, logs, thumbnails)
      - nexroll-data:/app/data
    
    environment:
      # Optional: Pre-configure Plex token for auto-connect
      # Get your token from: https://support.plex.tv/articles/204059436-finding-an-authentication-token-x-plex-token/
      - PLEX_TOKEN=${PLEX_TOKEN:-}
      
      # Optional: Plex server URL (for Docker environments)
      - PLEX_URL=${PLEX_URL:-http://host.docker.internal:32400}
      
      # Optional: Timezone configuration
      - TZ=${TZ:-UTC}
    
    # Uncomment to allow access to host network (alternative to host.docker.internal)
    # network_mode: host
    
    # Optional: Resource limits
    # deploy:
    #   resources:
    #     limits:
    #       cpus: '2'
    #       memory: 2G
    #     reservations:
    #       cpus: '0.5'
    #       memory: 512M

volumes:
  nexroll-data:
    driver: local

# Example with Plex in the same compose stack:
# services:
#   plex:
#     image: plexinc/pms-docker:latest
#     container_name: plex
#     network_mode: host
#     environment:
#       - PLEX_CLAIM=${PLEX_CLAIM}
#       - TZ=${TZ:-UTC}
#     volumes:
#       - plex-config:/config
#       - /path/to/media:/media
#       - /path/to/prerolls:/prerolls
# 
#   nexroll:
#     image: jbrns/nexroll:latest
#     container_name: nexroll
#     ports:
#       - "9393:9393"
#     volumes:
#       - /path/to/prerolls:/app/data/prerolls
#       - nexroll-data:/app/data
#     environment:
#       - PLEX_URL=http://plex:32400
#     depends_on:
#       - plex
# 
# volumes:
#   plex-config:
#   nexroll-data:
